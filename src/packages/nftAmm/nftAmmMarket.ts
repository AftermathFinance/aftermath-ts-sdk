import {
	SuiNetwork,
	NftAmmMarketObject,
	ApiNftAmmDepositBody,
} from "../../types";
import { Caller } from "../../general/utils/caller";
import { Pool } from "../pools";

export class NftAmmMarket extends Caller {
	/////////////////////////////////////////////////////////////////////
	//// Private Constants
	/////////////////////////////////////////////////////////////////////

	private static readonly constants = {};

	/////////////////////////////////////////////////////////////////////
	//// Public Class Members
	/////////////////////////////////////////////////////////////////////

	public pool: Pool;

	/////////////////////////////////////////////////////////////////////
	//// Constructor
	/////////////////////////////////////////////////////////////////////

	constructor(
		public readonly market: NftAmmMarketObject,
		public readonly network?: SuiNetwork
	) {
		super(network, `nft-amm/markets/${market.objectId}`);
		this.market = market;
		this.pool = new Pool(market.pool, network);
	}

	/////////////////////////////////////////////////////////////////////
	//// Transactions
	/////////////////////////////////////////////////////////////////////

	public async getDepositTransaction(inputs: ApiNftAmmDepositBody) {
		return this.fetchApiTransaction<ApiNftAmmDepositBody>(
			"transactions/deposit",
			inputs
		);
	}
}
